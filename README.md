# νΈλ¦¬ν”μ—¬ν–‰μ ν΄λ½ λ§μΌλ¦¬μ§€ μ„λΉ„μ¤

## π›  κΈ°μ  μ¤νƒ
- μ–Έμ–΄: Java 11
- ν”„λ μ„μ›ν¬: Spring Boot 2.7.1, Spring MVC, Spring rest docs
- Database: MySQL 8, Spring Data JPA, flyway
- infra: docker
- ν…μ¤νΈ: Junit5, REST Assured

## π’» κ°λ° ν™κ²½
MacBook M1 Air

## β–¶οΈ μ‹¤ν–‰ λ°©λ²•

**docker & docker-compose κ°€ μ„¤μΉλμ–΄ μμ–΄μ•Όν•©λ‹λ‹¤!**

1) `git clone https://github.com/KJunseo/Traveler-Club-Mileage-Service.git`
2) `cd Traveler-Club-Mileage-Service/`
3) `./gradlew clean build`
4) `docker-compose build --pull`
5) `docker-compose up -d` (MySQL λ„μ°λ”λ° μ‹κ°„μ΄ μΆ€ κ±Έλ¦½λ‹λ‹¤!)

**M1 ν™κ²½μΈ κ²½μ° docker-compose.yml νμΌμ—μ„ μ£Όμ„μ„ ν’€μ–΄μ¤μ•Όν•©λ‹λ‹¤!**

4) `vi docker-compose.yml`
5) 4λ²μ§Έ λΌμΈ `platform: linux/x86_64` μ£Όμ„μ„ ν’€μ–΄μ£Όκ³  μ €μ¥
6) `docker-compose build --pull`
7) `docker-compose up -d`

### π“ μ„¤λ…
#### ν¬μΈνΈ μ λ¦½ API 
λ¦¬λ·° μƒμ„± API(μ‹¤μ λ΅ κµ¬ν„ x) νΈμ¶ ν›„ μ΄μ–΄μ„ ν¬μΈνΈ μ λ¦½ APIκ°€ νΈμ¶λλ‹¤κ³  μƒκ°ν•κ³  κµ¬ν„ν–μµλ‹λ‹¤.(λ¦¬λ·° μƒμ„± API -> ν¬μΈνΈ μ λ¦½ API)

#### ν¬μΈνΈ μμ • API
μƒμ„±λμ—λ λ¦¬λ·° μμ • API μ΄ν›„ ν¬μΈνΈ μμ • APIκ°€ νΈμ¶λλ‹¤κ³  μƒκ°ν•κ³  κµ¬ν„ν–μµλ‹λ‹¤. μ‹¤μ  λ‚΄μ© λ³€κ²½μ΄ ν•„μ”ν•μ—¬ λ¦¬λ·° μμ • APIλ„ μ¶”κ°€λ΅ κµ¬ν„ν–μµλ‹λ‹¤.(λ¦¬λ·° μμ • API -> ν¬μΈνΈ μμ • API)
   
#### ν¬μΈνΈ μ‚­μ  API 
ν¬μΈνΈλ¥Ό κ³„μ‚°ν•κΈ° μ„ν•΄μ„ λ¦¬λ·° μ •λ³΄κ°€ ν•„μ”ν•κΈ° λ•λ¬Έμ— ν¬μΈνΈ μ‚­μ  API νΈμ¶ μ΄ν›„ λ¦¬λ·° μ‚­μ  API(μ‹¤μ  κµ¬ν„ x)κ°€ νΈμ¶λλ‹¤κ³  μƒκ°ν•κ³  κµ¬ν„ν–μµλ‹λ‹¤.(ν¬μΈνΈ μ‚­μ  API -> λ¦¬λ·° μ‚­μ  API)

#### μ μ € λ³„ ν¬μΈνΈ μ΅°ν
μ μ €μ uuidλ¥Ό ν†µν•΄ ν„μ¬ λ„μ  ν¬μΈνΈκ°’μ„ μ΅°νν•  μ μλ” APIλ¥Ό κµ¬ν„ν–μµλ‹λ‹¤.

#### ν¬μΈνΈ λ¶€μ—¬ νμ¤ν† λ¦¬ κ΄€λ¦¬
ν¬μΈνΈ μ¦κ°μ‹ `PointHistory`λΌλ” ν…μ΄λΈ”μ— λ‚΄μ—­μ„ μ €μ¥ν–μµλ‹λ‹¤. μ „μ²΄ λ‚΄μ—­ μ΅°νμ™€ μ μ €λ³„ λ‚΄μ—­ μ΅°ν APIλ¥Ό κµ¬ν„ν–μµλ‹λ‹¤.

#### κΈ°νƒ€ λ‚΄μ©
- ν¬μΈνΈ μ λ¦½ κΈ°λ¥μ„ μν–‰ν•κΈ° μ„ν•΄ κΈ°μ΅΄ λ°μ΄ν„°κ°€ ν•„μ”ν•λ‹¤κ³  μƒκ°ν•μ—¬ μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰μ‹ `μ μ €`, `μ¥μ†`, `λ¦¬λ·°` λ¥Ό μ €μ¥ν–μµλ‹λ‹¤.(μ‹¤ν–‰ν•΄λ³΄κΈ° μ„ν•΄ ν•΄λ‹Ή λ”λ―Έ λ°μ΄ν„°λ¥Ό μ΅°νν•  μ μλ” μ„μ‹ APIλ¥Ό λ§λ“¤μ—μµλ‹λ‹¤. `GET /dummy`)

- intellij μ‚¬μ©μ‹ μ‰½κ² μ‹¤ν–‰μ‹μΌλ³Ό μ μλ„λ΅ [http νμΌ](./http/scenario.http)μ„ μ¶”κ°€ν–μµλ‹λ‹¤.


### π“ API λ¬Έμ„
μ‹¤ν–‰ ν›„ http://localhost:8080/docs/api.html

### π—„ DDL
flywayλ¥Ό μ‚¬μ©ν•μ—¬ dbλ¥Ό κ΄€λ¦¬ν•μ€μµλ‹λ‹¤. λ²„μ „ λ³€κ²½μ΄ μμ—μ–΄μ„ [μµμΆ… ddlκ³Ό index μΏΌλ¦¬λ¬Έ](./src/main/resources/ddl.sql) λ§ν¬λ¥Ό μ²¨λ¶€ν•©λ‹λ‹¤.

### π” μΆ…λ£
1) `docker-compose down`
